if("undefined"==typeof jQuery)throw new Error("Kube's requires jQuery");!function(t){var e=jQuery.fn.jquery.split(".");if(1==e[0]&&e[1]<8)throw new Error("Kube's requires at least jQuery v1.8")}(),function(t){Function.prototype.inherits=function(t){var e=function(){};e.prototype=t.prototype;var s=new e;for(var i in this.prototype)s[i]=this.prototype[i];this.prototype=s,this.prototype.super=t.prototype};var e=function(e,s){s="object"==typeof s?s:{},this.$element=t(e),this.opts=t.extend(!0,this.defaults,t.fn[this.namespace].options,this.$element.data(),s),this.$target="string"==typeof this.opts.target?t(this.opts.target):null};e.prototype={getInstance:function(){return this.$element.data("fn."+this.namespace)},hasTarget:function(){return!(null===this.$target)},callback:function(e){var s=[].slice.call(arguments).splice(1);return this.$element&&(s=this._fireCallback(t._data(this.$element[0],"events"),e,this.namespace,s)),this.$target&&(s=this._fireCallback(t._data(this.$target[0],"events"),e,this.namespace,s)),this.opts&&this.opts.callbacks&&t.isFunction(this.opts.callbacks[e])?this.opts.callbacks[e].apply(this,s):s},_fireCallback:function(t,e,s,i){if(t&&void 0!==t[e])for(var n=t[e].length,o=0;o<n;o++){if(t[e][o].namespace===s)var a=t[e][o].handler.apply(this,i)}return void 0===a?i:a}},window.Kube=e}(jQuery),function(t,e){t.Plugin={create:function(s,i){return i=void 0===i?s.toLowerCase():i,e.fn[i]=function(n,o){var a=Array.prototype.slice.call(arguments,1),h="fn."+i,l=[];return this.each(function(){var i=e(this),c=i.data(h);if(o="object"==typeof n?n:o,c||(i.data(h,{}),i.data(h,c=new t[s](this,o))),"string"==typeof n)if(e.isFunction(c[n])){var r=c[n].apply(c,a);void 0!==r&&l.push(r)}else e.error('No such method "'+n+'" for '+s)}),0===l.length||1===l.length?0===l.length?this:l[0]:l},e.fn[i].options={},this},autoload:function(t){for(var e=t.split(","),s=e.length,i=0;i<s;i++){var n=e[i].toLowerCase().split(",").map(function(t){return t.trim()}).join(",");this.autoloadQueue.push(n)}return this},autoloadQueue:[],startAutoload:function(){if(window.MutationObserver&&0!==this.autoloadQueue.length){var t=this;new MutationObserver(function(e){e.forEach(function(e){var s=e.addedNodes;0===s.length||1===s.length&&3===s.nodeType||t.startAutoloadOnce()})}).observe(document,{subtree:!0,childList:!0})}},startAutoloadOnce:function(){var t=this;e("[data-component]").not("[data-loaded]").each(function(){var s=e(this),i=s.data("component");-1!==t.autoloadQueue.indexOf(i)&&(s.attr("data-loaded",!0),s[i]())})},watch:function(){t.Plugin.startAutoloadOnce(),t.Plugin.startAutoload()}},e(window).on("load",function(){t.Plugin.watch()})}(Kube,jQuery),function(t,e){t.Animation=function(e,s,i){this.namespace="animation",this.defaults={},t.apply(this,arguments),this.effect=s,this.completeCallback=void 0!==i&&i,this.prefixes=["","-moz-","-o-animation-","-webkit-"],this.queue=[],this.start()},t.Animation.prototype={start:function(){this.isSlideEffect()&&this.setElementHeight(),this.addToQueue(),this.clean(),this.animate()},addToQueue:function(){this.queue.push(this.effect)},setElementHeight:function(){this.$element.height(this.$element.height())},removeElementHeight:function(){this.$element.css("height","")},isSlideEffect:function(){return"slideDown"===this.effect||"slideUp"===this.effect},isHideableEffect:function(){return-1!==e.inArray(this.effect,["fadeOut","slideUp","flipOut","zoomOut","slideOutUp","slideOutRight","slideOutLeft"])},isToggleEffect:function(){return"show"===this.effect||"hide"===this.effect},storeHideClasses:function(){this.$element.hasClass("hide-sm")?this.$element.data("hide-sm-class",!0):this.$element.hasClass("hide-md")&&this.$element.data("hide-md-class",!0)},revertHideClasses:function(){this.$element.data("hide-sm-class")?this.$element.addClass("hide-sm").removeData("hide-sm-class"):this.$element.data("hide-md-class")?this.$element.addClass("hide-md").removeData("hide-md-class"):this.$element.addClass("hide")},removeHideClass:function(){this.$element.data("hide-sm-class")?this.$element.removeClass("hide-sm"):this.$element.data("hide-md-class")?this.$element.removeClass("hide-md"):this.$element.removeClass("hide")},animate:function(){if(this.storeHideClasses(),this.isToggleEffect())return this.makeSimpleEffects();this.$element.addClass("kubeanimated"),this.$element.addClass(this.queue[0]),this.removeHideClass();var t=this.queue.length>1?null:this.completeCallback;this.complete("AnimationEnd",e.proxy(this.makeComplete,this),t)},makeSimpleEffects:function(){"show"===this.effect?this.removeHideClass():"hide"===this.effect&&this.revertHideClasses(),"function"==typeof this.completeCallback&&this.completeCallback(this)},makeComplete:function(){this.$element.hasClass(this.queue[0])&&(this.clean(),this.queue.shift(),this.queue.length&&this.animate())},complete:function(t,s,i){var n=t.toLowerCase()+" webkit"+t+" o"+t+" MS"+t;this.$element.one(n,e.proxy(function(){"function"==typeof s&&s(),this.isHideableEffect()&&this.revertHideClasses(),this.isSlideEffect()&&this.removeElementHeight(),"function"==typeof i&&i(this),this.$element.off(n)},this))},clean:function(){this.$element.removeClass("kubeanimated").removeClass(this.queue[0])}},t.Animation.inherits(t)}(Kube,jQuery),function(t){t.fn.animation=function(e,s){var i="fn.animation";return this.each(function(){var n=t(this);n.data(i);n.data(i,{}),n.data(i,new Kube.Animation(this,e,s))})},t.fn.animation.options={}}(jQuery),function(t){t.Detect=function(){},t.Detect.prototype={isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isMobileScreen:function(){return $(window).width()<=768},isTabletScreen:function(){return $(window).width()>=768&&$(window).width()<=1024},isDesktopScreen:function(){return $(window).width()>1024}}}(Kube),function(t,e){t.FormData=function(t){this.opts=t.opts},t.FormData.prototype={set:function(t){this.data=t},get:function(t){return this.formdata=t,this.opts.appendForms&&this.appendForms(),this.opts.appendFields&&this.appendFields(),this.data},appendFields:function(){var t=e(this.opts.appendFields);if(0!==t.length){var s=this,i="";this.formdata?t.each(function(){s.data.append(e(this).attr("name"),e(this).val())}):(t.each(function(){i+="&"+e(this).attr("name")+"="+e(this).val()}),this.data=""===this.data?i.replace(/^&/,""):this.data+i)}},appendForms:function(){var t=e(this.opts.appendForms);if(0!==t.length)if(this.formdata){var s=this,i=e(this.opts.appendForms).serializeArray();e.each(i,function(t,e){s.data.append(e.name,e.value)})}else{var n=t.serialize();this.data=""===this.data?n:this.data+"&"+n}}}}(Kube,jQuery),function(t,e){t.Response=function(t){},t.Response.prototype={parse:function(t){if(""===t)return!1;var e={};try{e=JSON.parse(t)}catch(t){return!1}if(void 0!==e[0])for(var s in e)this.parseItem(e[s]);else this.parseItem(e);return e},parseItem:function(t){return"value"===t.type?e.each(t.data,e.proxy(function(t,s){s=!0===(s=null===s||!1===s?0:s)?1:s,e(t).val(s)},this)):"html"===t.type?e.each(t.data,e.proxy(function(t,s){s=null===s||!1===s?"":s,e(t).html(this.stripslashes(s))},this)):"addClass"===t.type?e.each(t.data,function(t,s){e(t).addClass(s)}):"removeClass"===t.type?e.each(t.data,function(t,s){e(t).removeClass(s)}):"command"===t.type?e.each(t.data,function(t,s){e(s)[t]()}):"animation"===t.type?e.each(t.data,function(t,s){s.opts=void 0===s.opts?{}:s.opts,e(t).animation(s.name,s.opts)}):"location"===t.type?top.location.href=t.data:"notify"===t.type&&e.notify(t.data),t},stripslashes:function(t){return(t+"").replace(/\0/g,"0").replace(/\\([\\'"])/g,"$1")}}}(Kube,jQuery),function(t,e){t.Utils=function(){},t.Utils.prototype={disableBodyScroll:function(){var t=e("html"),s=window.innerWidth;if(!s){var i=document.documentElement.getBoundingClientRect();s=i.right-Math.abs(i.left)}var n=document.body.clientWidth<s,o=this.measureScrollbar();t.css("overflow","hidden"),n&&t.css("padding-right",o)},measureScrollbar:function(){var t=e("body"),s=document.createElement("div");s.className="scrollbar-measure",t.append(s);var i=s.offsetWidth-s.clientWidth;return t[0].removeChild(s),i},enableBodyScroll:function(){e("html").css({overflow:"","padding-right":""})}}}(Kube,jQuery),function(t,e){t.Message=function(e,s){this.namespace="message",this.defaults={closeSelector:".close",closeEvent:"click",animationOpen:"fadeIn",animationClose:"fadeOut",callbacks:["open","opened","close","closed"]},t.apply(this,arguments),this.start()},t.Message.prototype={start:function(){this.$close=this.$element.find(this.opts.closeSelector),this.$close.on(this.opts.closeEvent+"."+this.namespace,e.proxy(this.close,this)),this.$element.addClass("open")},stop:function(){this.$close.off("."+this.namespace),this.$element.removeClass("open")},open:function(t){t&&t.preventDefault(),this.isOpened()||(this.callback("open"),this.$element.animation(this.opts.animationOpen,e.proxy(this.onOpened,this)))},isOpened:function(){return this.$element.hasClass("open")},onOpened:function(){this.callback("opened"),this.$element.addClass("open")},close:function(t){t&&t.preventDefault(),this.isOpened()&&(this.callback("close"),this.$element.animation(this.opts.animationClose,e.proxy(this.onClosed,this)))},onClosed:function(){this.callback("closed"),this.$element.removeClass("open")}},t.Message.inherits(t),t.Plugin.create("Message"),t.Plugin.autoload("Message")}(Kube,jQuery),function(t,e){t.Sticky=function(e,s){this.namespace="sticky",this.defaults={classname:"fixed",offset:0,callbacks:["fixed","unfixed"]},t.apply(this,arguments),this.start()},t.Sticky.prototype={start:function(){this.offsetTop=this.getOffsetTop(),this.load(),e(window).scroll(e.proxy(this.load,this))},getOffsetTop:function(){return this.$element.offset().top},load:function(){return this.isFix()?this.fixed():this.unfixed()},isFix:function(){return e(window).scrollTop()>this.offsetTop+this.opts.offset},fixed:function(){this.$element.addClass(this.opts.classname).css("top",this.opts.offset+"px"),this.callback("fixed")},unfixed:function(){this.$element.removeClass(this.opts.classname).css("top",""),this.callback("unfixed")}},t.Sticky.inherits(t),t.Plugin.create("Sticky"),t.Plugin.autoload("Sticky")}(Kube,jQuery),function(t,e){t.Toggleme=function(e,s){this.namespace="toggleme",this.defaults={toggleEvent:"click",target:null,text:"",animationOpen:"slideDown",animationClose:"slideUp",callbacks:["open","opened","close","closed"]},t.apply(this,arguments),this.start()},t.Toggleme.prototype={start:function(){this.hasTarget()&&this.$element.on(this.opts.toggleEvent+"."+this.namespace,e.proxy(this.toggle,this))},stop:function(){this.$element.off("."+this.namespace),this.revertText()},toggle:function(t){this.isOpened()?this.close(t):this.open(t)},open:function(t){t&&t.preventDefault(),this.isOpened()||(this.storeText(),this.callback("open"),this.$target.animation("slideDown",e.proxy(this.onOpened,this)),setTimeout(e.proxy(this.replaceText,this),100))},close:function(t){t&&t.preventDefault(),this.isOpened()&&(this.callback("close"),this.$target.animation("slideUp",e.proxy(this.onClosed,this)))},isOpened:function(){return this.$target.hasClass("open")},onOpened:function(){this.$target.addClass("open"),this.callback("opened")},onClosed:function(){this.$target.removeClass("open"),this.revertText(),this.callback("closed")},storeText:function(){this.$element.data("replacement-text",this.$element.html())},revertText:function(){var t=this.$element.data("replacement-text");t&&this.$element.html(t),this.$element.removeData("replacement-text")},replaceText:function(){""!==this.opts.text&&this.$element.html(this.opts.text)}},t.Toggleme.inherits(t),t.Plugin.create("Toggleme"),t.Plugin.autoload("Toggleme")}(Kube,jQuery),function(t,e){t.Offcanvas=function(e,s){this.namespace="offcanvas",this.defaults={target:null,push:!0,width:"250px",direction:"left",toggleEvent:"click",clickOutside:!0,animationOpen:"slideInLeft",animationClose:"slideOutLeft",callbacks:["open","opened","close","closed"]},t.apply(this,arguments),this.utils=new t.Utils,this.detect=new t.Detect,this.start()},t.Offcanvas.prototype={start:function(){this.hasTarget()&&(this.buildTargetWidth(),this.buildAnimationDirection(),this.$close=this.getCloseLink(),this.$element.on(this.opts.toggleEvent+"."+this.namespace,e.proxy(this.toggle,this)),this.$target.addClass("offcanvas"))},stop:function(){this.closeAll(),this.$element.off("."+this.namespace),this.$close.off("."+this.namespace),e(document).off("."+this.namespace)},toggle:function(t){this.isOpened()?this.close(t):this.open(t)},buildTargetWidth:function(){this.opts.width=e(window).width()<parseInt(this.opts.width)?"100%":this.opts.width},buildAnimationDirection:function(){"right"===this.opts.direction&&(this.opts.animationOpen="slideInRight",this.opts.animationClose="slideOutRight")},getCloseLink:function(){return this.$target.find(".close")},open:function(t){t&&t.preventDefault(),this.isOpened()||(this.closeAll(),this.callback("open"),this.$target.addClass("offcanvas-"+this.opts.direction),this.$target.css("width",this.opts.width),this.pushBody(),this.$target.animation(this.opts.animationOpen,e.proxy(this.onOpened,this)))},closeAll:function(){var t=e(document).find(".offcanvas");0!==t.length&&(t.each(function(){var t=e(this);t.hasClass("open")&&(t.css("width","").animation("hide"),t.removeClass("open offcanvas-left offcanvas-right"))}),e(document).off("."+this.namespace),e("body").css("left",""))},close:function(t){if(t){var s=e(t.target);if(("A"===s[0].tagName||"BUTTON"===s[0].tagName)&&0!==s.closest(".offcanvas").length&&!s.hasClass("close"))return;t.preventDefault()}this.isOpened()&&(this.utils.enableBodyScroll(),this.callback("close"),this.pullBody(),this.$target.animation(this.opts.animationClose,e.proxy(this.onClosed,this)))},isOpened:function(){return this.$target.hasClass("open")},onOpened:function(){this.opts.clickOutside&&e(document).on("click."+this.namespace,e.proxy(this.close,this)),this.detect.isMobileScreen()&&e("html").addClass("no-scroll"),e(document).on("keyup."+this.namespace,e.proxy(this.handleKeyboard,this)),this.$close.on("click."+this.namespace,e.proxy(this.close,this)),this.utils.disableBodyScroll(),this.$target.addClass("open"),this.callback("opened")},onClosed:function(){this.detect.isMobileScreen()&&e("html").removeClass("no-scroll"),this.$target.css("width","").removeClass("offcanvas-"+this.opts.direction),this.$close.off("."+this.namespace),e(document).off("."+this.namespace),this.$target.removeClass("open"),this.callback("closed")},handleKeyboard:function(t){27===t.which&&this.close()},pullBody:function(){this.opts.push&&e("body").animate({left:0},350,function(){e(this).removeClass("offcanvas-push-body")})},pushBody:function(){if(this.opts.push){var t="left"===this.opts.direction?{left:this.opts.width}:{left:"-"+this.opts.width};e("body").addClass("offcanvas-push-body").animate(t,200)}}},t.Offcanvas.inherits(t),t.Plugin.create("Offcanvas"),t.Plugin.autoload("Offcanvas")}(Kube,jQuery),function(t,e){t.Collapse=function(e,s){this.namespace="collapse",this.defaults={target:null,toggle:!0,active:!1,toggleClass:"collapse-toggle",boxClass:"collapse-box",callbacks:["open","opened","close","closed"],hashes:[],currentHash:!1,currentItem:!1},t.apply(this,arguments),this.start()},t.Collapse.prototype={start:function(){this.$items=this.getItems(),this.$items.each(e.proxy(this.loadItems,this)),this.$boxes=this.getBoxes(),this.setActiveItem()},getItems:function(){return this.$element.find("."+this.opts.toggleClass)},getBoxes:function(){return this.$element.find("."+this.opts.boxClass)},loadItems:function(t,s){var i=this.getItem(s);i.$el.attr("rel",i.hash),e(i.hash).hasClass("hide")||(this.opts.currentItem=i,this.opts.active=i.hash,i.$el.addClass("active")),i.$el.on("click.collapse",e.proxy(this.toggle,this))},setActiveItem:function(){!1!==this.opts.active&&(this.opts.currentItem=this.getItemBy(this.opts.active),this.opts.active=this.opts.currentItem.hash),!1!==this.opts.currentItem&&(this.addActive(this.opts.currentItem),this.opts.currentItem.$box.removeClass("hide"))},addActive:function(t){t.$box.removeClass("hide").addClass("open"),t.$el.addClass("active"),!1!==t.$caret&&t.$caret.removeClass("down").addClass("up"),!1!==t.$parent&&t.$parent.addClass("active"),this.opts.currentItem=t},removeActive:function(t){t.$box.removeClass("open"),t.$el.removeClass("active"),!1!==t.$caret&&t.$caret.addClass("down").removeClass("up"),!1!==t.$parent&&t.$parent.removeClass("active"),this.opts.currentItem=!1},toggle:function(t){t&&t.preventDefault();var s=e(t.target).closest("."+this.opts.toggleClass).get(0)||t.target,i=this.getItem(s);this.isOpened(i.hash)?this.close(i.hash):this.open(t)},openAll:function(){this.$items.addClass("active"),this.$boxes.addClass("open").removeClass("hide")},open:function(t,s){if(void 0!==t){"object"==typeof t&&t.preventDefault();var i=e(t.target).closest("."+this.opts.toggleClass).get(0)||t.target,n="object"==typeof t?this.getItem(i):this.getItemBy(t);n.$box.hasClass("open")||(this.opts.toggle&&this.closeAll(),this.callback("open",n),this.addActive(n),n.$box.animation("slideDown",e.proxy(this.onOpened,this)))}},onOpened:function(){this.callback("opened",this.opts.currentItem)},closeAll:function(){this.$items.removeClass("active").closest("li").removeClass("active"),this.$boxes.removeClass("open").addClass("hide")},close:function(t){var s=this.getItemBy(t);this.callback("close",s),this.opts.currentItem=s,s.$box.animation("slideUp",e.proxy(this.onClosed,this))},onClosed:function(){var t=this.opts.currentItem;this.removeActive(t),this.callback("closed",t)},isOpened:function(t){return e(t).hasClass("open")},getItem:function(t){var s={};s.$el=e(t),s.hash=s.$el.attr("href"),s.$box=e(s.hash);var i=s.$el.parent();s.$parent="LI"===i[0].tagName&&i;var n=s.$el.find(".caret");return s.$caret=0!==n.length&&n,s},getItemBy:function(t){var e="number"==typeof t?this.$items.eq(t-1):this.$element.find('[rel="'+t+'"]');return this.getItem(e)}},t.Collapse.inherits(t),t.Plugin.create("Collapse"),t.Plugin.autoload("Collapse")}(Kube,jQuery),function(t,e){t.Dropdown=function(e,s){this.namespace="dropdown",this.defaults={target:null,toggleEvent:"click",height:!1,width:!1,animationOpen:"slideDown",animationClose:"slideUp",caretUp:!1,callbacks:["open","opened","close","closed"]},t.apply(this,arguments),this.utils=new t.Utils,this.detect=new t.Detect,this.start()},t.Dropdown.prototype={start:function(){this.buildClose(),this.buildCaret(),this.detect.isMobile()&&this.buildMobileAnimation(),this.$target.addClass("hide"),this.$element.on(this.opts.toggleEvent+"."+this.namespace,e.proxy(this.toggle,this))},stop:function(){this.$element.off("."+this.namespace),this.$target.removeClass("open").addClass("hide"),this.disableEvents()},buildMobileAnimation:function(){this.opts.animationOpen="fadeIn",this.opts.animationClose="fadeOut"},buildClose:function(){this.$close=this.$target.find(".close")},buildCaret:function(){this.$caret=this.getCaret(),this.buildCaretPosition()},buildCaretPosition:function(){var t=this.$element.offset().top+this.$element.innerHeight()+this.$target.innerHeight();e(document).height()>t||(this.opts.caretUp=!0,this.$caret.addClass("up"))},getCaret:function(){return this.$element.find(".caret")},toggleCaretOpen:function(){this.opts.caretUp?this.$caret.removeClass("up").addClass("down"):this.$caret.removeClass("down").addClass("up")},toggleCaretClose:function(){this.opts.caretUp?this.$caret.removeClass("down").addClass("up"):this.$caret.removeClass("up").addClass("down")},toggle:function(t){this.isOpened()?this.close(t):this.open(t)},open:function(t){t&&t.preventDefault(),this.callback("open"),e(".dropdown").removeClass("open").addClass("hide"),this.opts.height&&this.$target.css("min-height",this.opts.height+"px"),this.opts.width&&this.$target.width(this.opts.width),this.setPosition(),this.toggleCaretOpen(),this.$target.animation(this.opts.animationOpen,e.proxy(this.onOpened,this))},close:function(t){if(this.isOpened()){if(t){if(this.shouldNotBeClosed(t.target))return;t.preventDefault()}this.utils.enableBodyScroll(),this.callback("close"),this.toggleCaretClose(),this.$target.animation(this.opts.animationClose,e.proxy(this.onClosed,this))}},onClosed:function(){this.$target.removeClass("open"),this.disableEvents(),this.callback("closed")},onOpened:function(){this.$target.addClass("open"),this.enableEvents(),this.callback("opened")},isOpened:function(){return this.$target.hasClass("open")},enableEvents:function(){this.detect.isDesktop()&&this.$target.on("mouseover."+this.namespace,e.proxy(this.utils.disableBodyScroll,this.utils)).on("mouseout."+this.namespace,e.proxy(this.utils.enableBodyScroll,this.utils)),e(document).on("scroll."+this.namespace,e.proxy(this.setPosition,this)),e(window).on("resize."+this.namespace,e.proxy(this.setPosition,this)),e(document).on("click."+this.namespace+" touchstart."+this.namespace,e.proxy(this.close,this)),e(document).on("keydown."+this.namespace,e.proxy(this.handleKeyboard,this)),this.$target.find('[data-action="dropdown-close"]').on("click."+this.namespace,e.proxy(this.close,this))},disableEvents:function(){this.$target.off("."+this.namespace),e(document).off("."+this.namespace),e(window).off("."+this.namespace)},handleKeyboard:function(t){27===t.which&&this.close(t)},shouldNotBeClosed:function(t){return"dropdown-close"!==e(t).attr("data-action")&&t!==this.$close[0]&&0!==e(t).closest(".dropdown").length},isNavigationFixed:function(){return 0!==this.$element.closest(".fixed").length},getPlacement:function(t){return e(document).height()<t?"top":"bottom"},getOffset:function(t){return this.isNavigationFixed()?this.$element.position():this.$element.offset()},getPosition:function(){return this.isNavigationFixed()?"fixed":"absolute"},setPosition:function(){if(this.detect.isMobile())this.$target.addClass("dropdown-mobile");else{var t,s=this.getPosition(),i=this.getOffset(s),n=this.$target.innerHeight(),o=this.$target.innerWidth(),a=this.getPlacement(i.top+n+this.$element.innerHeight()),h=e(window).width()<i.left+o?o-this.$element.innerWidth():0,l=i.left-h;"bottom"===a?(this.isOpened()||this.$caret.removeClass("up").addClass("down"),this.opts.caretUp=!1,t=i.top+this.$element.outerHeight()+1):(this.opts.animationOpen="show",this.opts.animationClose="hide",this.isOpened()||this.$caret.addClass("up").removeClass("down"),this.opts.caretUp=!0,t=i.top-n-1),this.$target.css({position:s,top:t+"px",left:l+"px"})}}},t.Dropdown.inherits(t),t.Plugin.create("Dropdown"),t.Plugin.autoload("Dropdown")}(Kube,jQuery),function(t,e){t.Tabs=function(e,s){this.namespace="tabs",this.defaults={equals:!1,active:!1,live:!1,hash:!0,callbacks:["init","next","prev","open","opened","close","closed"]},t.apply(this,arguments),this.start()},t.Tabs.prototype={start:function(){!1!==this.opts.live&&this.buildLiveTabs(),this.tabsCollection=[],this.hashesCollection=[],this.currentHash=[],this.currentItem=!1,this.$items=this.getItems(),this.$items.each(e.proxy(this.loadItems,this)),this.$tabs=this.getTabs(),this.currentHash=this.getLocationHash(),this.closeAll(),this.setActiveItem(),this.setItemHeight(),this.callback("init")},getTabs:function(){return e(this.tabsCollection).map(function(){return this.toArray()})},getItems:function(){return this.$element.find("a")},loadItems:function(t,s){var i=this.getItem(s);i.$el.attr("rel",i.hash),this.collectItem(i),i.$parent.hasClass("active")&&(this.currentItem=i,this.opts.active=i.hash),i.$el.on("click.tabs",e.proxy(this.open,this))},collectItem:function(t){this.tabsCollection.push(t.$tab),this.hashesCollection.push(t.hash)},buildLiveTabs:function(){var t=e(this.opts.live);0!==t.length&&(this.$liveTabsList=e("<ul />"),t.each(e.proxy(this.buildLiveItem,this)),this.$element.html("").append(this.$liveTabsList))},buildLiveItem:function(t,s){var i=e(s),n=e("<li />"),o=e("<a />"),a=t+1;i.attr("id",this.getLiveItemId(i,a));var h="#"+i.attr("id"),l=this.getLiveItemTitle(i);o.attr("href",h).attr("rel",h).text(l),n.append(o),this.$liveTabsList.append(n)},getLiveItemId:function(t,e){return void 0===t.attr("id")?this.opts.live.replace(".","")+e:t.attr("id")},getLiveItemTitle:function(t){return void 0===t.attr("data-title")?t.attr("id"):t.attr("data-title")},setActiveItem:function(){this.currentHash?(this.currentItem=this.getItemBy(this.currentHash),this.opts.active=this.currentHash):!1===this.opts.active&&(this.currentItem=this.getItem(this.$items.first()),this.opts.active=this.currentItem.hash),this.addActive(this.currentItem)},addActive:function(t){t.$parent.addClass("active"),t.$tab.removeClass("hide").addClass("open"),this.currentItem=t},removeActive:function(t){t.$parent.removeClass("active"),t.$tab.addClass("hide").removeClass("open"),this.currentItem=!1},next:function(t){t&&t.preventDefault();var e=this.getItem(this.fetchElement("next"));this.open(e.hash),this.callback("next",e)},prev:function(t){t&&t.preventDefault();var e=this.getItem(this.fetchElement("prev"));this.open(e.hash),this.callback("prev",e)},fetchElement:function(t){var e;if(!1!==this.currentItem){if(0===(e=this.currentItem.$parent[t]().find("a")).length)return}else e=this.$items[0];return e},open:function(t,e){if(void 0!==t){"object"==typeof t&&t.preventDefault();var s="object"==typeof t?this.getItem(t.target):this.getItemBy(t);this.closeAll(),this.callback("open",s),this.addActive(s),this.pushStateOpen(e,s),this.callback("opened",s)}},pushStateOpen:function(t,e){!1!==t&&!1!==this.opts.hash&&history.pushState(!1,!1,e.hash)},close:function(t){var e=this.getItemBy(t);e.$parent.hasClass("active")&&(this.callback("close",e),this.removeActive(e),this.pushStateClose(),this.callback("closed",e))},pushStateClose:function(){!1!==this.opts.hash&&history.pushState(!1,!1," ")},closeAll:function(){this.$tabs.removeClass("open").addClass("hide"),this.$items.parent().removeClass("active")},getItem:function(t){var s={};return s.$el=e(t),s.hash=s.$el.attr("href"),s.$parent=s.$el.parent(),s.$tab=e(s.hash),s},getItemBy:function(t){var e="number"==typeof t?this.$items.eq(t-1):this.$element.find('[rel="'+t+'"]');return this.getItem(e)},getLocationHash:function(){return!1!==this.opts.hash&&(!!this.isHash()&&top.location.hash)},isHash:function(){return!(""===top.location.hash||-1===e.inArray(top.location.hash,this.hashesCollection))},setItemHeight:function(){if(this.opts.equals){var t=this.getItemMaxHeight()+"px";this.$tabs.css("min-height",t)}},getItemMaxHeight:function(){var t=0;return this.$tabs.each(function(){var s=e(this).height();t=s>t?s:t}),t}},t.Tabs.inherits(t),t.Plugin.create("Tabs"),t.Plugin.autoload("Tabs")}(Kube,jQuery),function(t){t.modalcurrent=null,t.modalwindow=function(e){var s=t.extend({},e,{show:!0});t("<span />").modal(s)}}(jQuery),function(t,e){t.Modal=function(e,s){this.namespace="modal",this.defaults={target:null,show:!1,url:!1,header:!1,width:"600px",height:!1,maxHeight:!1,position:"center",overlay:!0,appendForms:!1,appendFields:!1,animationOpen:"show",animationClose:"hide",callbacks:["open","opened","close","closed"]},t.apply(this,arguments),this.utils=new t.Utils,this.detect=new t.Detect,this.start()},t.Modal.prototype={start:function(){this.hasTarget()&&(this.opts.show?this.load():this.$element.on("click."+this.namespace,e.proxy(this.load,this)))},buildModal:function(){this.$modal=this.$target.find(".modal"),this.$header=this.$target.find(".modal-header"),this.$close=this.$target.find(".close"),this.$body=this.$target.find(".modal-body")},buildOverlay:function(){!1!==this.opts.overlay&&(0!==e("#modal-overlay").length?this.$overlay=e("#modal-overlay"):(this.$overlay=e('<div id="modal-overlay">').addClass("hide"),e("body").prepend(this.$overlay)),this.$overlay.addClass("overlay"))},buildHeader:function(){this.opts.header&&this.$header.html(this.opts.header)},load:function(t){this.buildModal(),this.buildOverlay(),this.buildHeader(),this.opts.url?this.buildContent():this.open(t)},open:function(t){t&&t.preventDefault(),this.isOpened()||(this.detect.isMobile()&&(this.opts.width="96%"),this.opts.overlay&&this.$overlay.removeClass("hide"),this.$target.removeClass("hide"),this.$modal.removeClass("hide"),this.enableEvents(),this.findActions(),this.resize(),e(window).on("resize."+this.namespace,e.proxy(this.resize,this)),this.detect.isDesktop()&&this.utils.disableBodyScroll(),this.$modal.find("input[type=text],input[type=url],input[type=email]").on("keydown."+this.namespace,e.proxy(this.handleEnter,this)),this.callback("open"),this.$modal.animation(this.opts.animationOpen,e.proxy(this.onOpened,this)))},close:function(t){if(this.$modal&&this.isOpened()){if(t){if(this.shouldNotBeClosed(t.target))return;t.preventDefault()}this.callback("close"),this.disableEvents(),this.$modal.animation(this.opts.animationClose,e.proxy(this.onClosed,this)),this.opts.overlay&&this.$overlay.animation(this.opts.animationClose)}},onOpened:function(){this.$modal.addClass("open"),this.callback("opened"),e.modalcurrent=this},onClosed:function(){this.callback("closed"),this.$target.addClass("hide"),this.$modal.removeClass("open"),this.detect.isDesktop()&&this.utils.enableBodyScroll(),this.$body.css("height",""),e.modalcurrent=null},isOpened:function(){return this.$modal.hasClass("open")},getData:function(){var e=new t.FormData(this);return e.set(""),e.get()},buildContent:function(){e.ajax({url:this.opts.url+"?"+(new Date).getTime(),cache:!1,type:"post",data:this.getData(),success:e.proxy(function(t){this.$body.html(t),this.open()},this)})},buildWidth:function(){var t=this.opts.width,s="2%",i="2%",n=t.match(/%$/);parseInt(this.opts.width)>e(window).width()&&!n?t="96%":n||(s="16px",i="16px"),this.$modal.css({width:t,"margin-top":s,"margin-bottom":i})},buildPosition:function(){if("center"===this.opts.position){var t=e(window).height(),s=this.$modal.outerHeight(),i=t/2-s/2+"px";this.detect.isMobile()?i="2%":s>t&&(i="16px"),this.$modal.css("margin-top",i)}},buildHeight:function(){var t=e(window).height();if(this.opts.maxHeight){var s=parseInt(this.$body.css("padding-top"))+parseInt(this.$body.css("padding-bottom")),i=parseInt(this.$modal.css("margin-top"))+parseInt(this.$modal.css("margin-bottom")),n=t-this.$header.innerHeight()-s-i;this.$body.height(n)}else!1!==this.opts.height&&this.$body.css("height",this.opts.height);this.$modal.outerHeight()>t&&(this.opts.animationOpen="show",this.opts.animationClose="hide")},resize:function(){this.buildWidth(),this.buildPosition(),this.buildHeight()},enableEvents:function(){this.$close.on("click."+this.namespace,e.proxy(this.close,this)),e(document).on("keyup."+this.namespace,e.proxy(this.handleEscape,this)),this.$target.on("click."+this.namespace,e.proxy(this.close,this))},disableEvents:function(){this.$close.off("."+this.namespace),e(document).off("."+this.namespace),this.$target.off("."+this.namespace),e(window).off("."+this.namespace)},findActions:function(){this.$body.find('[data-action="modal-close"]').on("mousedown."+this.namespace,e.proxy(this.close,this))},setHeader:function(t){this.$header.html(t)},setContent:function(t){this.$body.html(t)},setWidth:function(t){this.opts.width=t,this.resize()},getModal:function(){return this.$modal},getBody:function(){return this.$body},getHeader:function(){return this.$header},handleEnter:function(t){13===t.which&&(t.preventDefault(),this.close(!1))},handleEscape:function(t){return 27!==t.which||this.close(!1)},shouldNotBeClosed:function(t){return"modal-close"!==e(t).attr("data-action")&&t!==this.$close[0]&&0!==e(t).closest(".modal").length}},t.Modal.inherits(t),t.Plugin.create("Modal"),t.Plugin.autoload("Modal")}(Kube,jQuery);